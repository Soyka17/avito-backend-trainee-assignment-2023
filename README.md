# Тестовое задание для стажёра Backend

## Сервис динамического сегментирования пользователей

### Задача

Реализовать сервис, хранящий пользователя и сегменты, в которых он состоит (создание, изменение, удаление сегментов, а
также добавление и удаление пользователей в сегмент)

### Конфигурация

Приложение ищет yaml файл с конфигурацией в configs/conf.yaml,
также конфиг дообогащается переменными среды

| Переменная    | Обязательность | Описание                                                            | Пример значения                              |
|---------------|----------------|---------------------------------------------------------------------|----------------------------------------------|
| HTTP_PORT     | +              | Порт сервиса для приема запросов                                    | 8080                                         |
| HTTP_SITE_URL | +              | Домен сервиса (необходима для получения истории изменения сегмента) | localhost:8080                               |
| DATABASE_URL  | +              | Ссылка на Postgres c кредами                                        | postgres://user:pass@localhost:5432/postgres |
| LOG_LEVEL     | +              | Уровень логгирования                                                | info                                         |

### Запуск
1) Заполнить конфиг сервиса
2) Поднять базу данных (compose файл лежит в /build_utils)
3) Создать отношения в базе данных (необходимые команды лежат в init.SQL)
4) Из корневой директории проекта выполнить команду: `go run cmd/app/main.go`

### API
Доступные методы с примерами входных\выходных данных в /api/openAPI.yml

### Вопросы и их решения:
#### Вопрос 1
В доп задании 1 ручка должна возвращать ссылку на CSV файл. Должна ли быть эта ссылка общедоступной? Подойдет ли ссылка на ручку самого сервиса? 

Решение - да, подойдет)

#### Вопрос 2
В доп задании 3 сегмент должен присваиваться определенному n-ному проценту пользователей. Как выбрать пользователей, случайно, первых\последних n процентов?

Решение: ~~не реализовывать~~ Брать рандомные n процентов (на реализацию не хватило времени :( )
